<Page x:Class="DiplomZabpo43.SpisokPage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
      xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
      xmlns:local="clr-namespace:DiplomZabpo43"
      xmlns:fa="http://schemas.fontawesome.io/icons/"

      mc:Ignorable="d"
      Title="SpisokPage" Height="700" Width="710">


    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="230"/>
            <ColumnDefinition Width="Auto" MinWidth="470"/>
        </Grid.ColumnDefinitions>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>


        </Grid.RowDefinitions>


        <StackPanel Orientation="Vertical" HorizontalAlignment="Left" Width="700" Grid.ColumnSpan="2">

            <StackPanel  Orientation="Horizontal" HorizontalAlignment="Center"   Width="370" Margin="0,0,0,0" Grid.ColumnSpan="2" x:Name="SearchTexttt">
                <Border Margin="0,0,0,0" BorderBrush="Black" BorderThickness="1" CornerRadius="30" Width="369" Height="42" Background="White" Grid.ColumnSpan="2" x:Name="SearchTextt">
                    <StackPanel Orientation="Horizontal"  Width="359" >
                        <fa:ImageAwesome Icon="Search" Spin="False" SpinDuration="10" Foreground="Black"  Width="30" Height="30" Margin="0,0,10,0" />
                        <TextBox Grid.Row="0" Text="{Binding SearchText, UpdateSourceTrigger=PropertyChanged}" Background="White" FontSize="18" Margin="0,0,90,0" Grid.RowSpan="1" Height="25" BorderBrush="White" BorderThickness="0,0,0,1" Width="310" x:Name="SearchTextBox"/>
                    </StackPanel>
                </Border>
           </StackPanel>
            <ListView x:Name="ListViewMedTechnika" ItemsSource="{Binding Medikament}" SelectionChanged="ListViewMedTechnika_SelectionChanged" Width="700" Height="600" Background="Transparent" HorizontalContentAlignment="Center" Margin="0,10,0,0">
              
                <ListView.ItemsPanel>
                    <ItemsPanelTemplate>
                        <UniformGrid Columns="2"/>
                    </ItemsPanelTemplate>
                </ListView.ItemsPanel>
                <!-- Установка шаблона для элементов списка -->
                
                <ListView.ItemTemplate>
                    <DataTemplate>
                        <Border BorderBrush="Black" BorderThickness="1" Margin="0,10,0,0" Grid.RowSpan="2" CornerRadius="10">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="83"/>
                                    <ColumnDefinition Width="220"/>
                                </Grid.ColumnDefinitions>
                                <!-- Первый столбец -->
                                <StackPanel Grid.Column="0" Orientation="Vertical" Height="auto">
                                    <Image x:Name="imgMedikament" Source="{Binding Image_med}" Stretch="UniformToFill" Margin="0" HorizontalAlignment="Left" VerticalAlignment="Top" Width="100" Height="100"/>
                                </StackPanel>
                                <!-- Второй столбец -->
                                <StackPanel Grid.Column="1" Orientation="Vertical">
                                    <TextBlock Text="{Binding Name_product}" Margin="5" Foreground="Black"/>
                                    <TextBlock Text="{Binding Brand_name, StringFormat=Бренд: \{0\}}" Margin="5" Foreground="Black"/>
                                    <TextBlock Text="{Binding Form, StringFormat=Форма: \{0\}}" Margin="5" Foreground="Black"/>
                                    <TextBlock Text="{Binding Manufac_name, StringFormat=Имя производителя: \{0\}}" Margin="5" Foreground="Black"/>
                                    <TextBlock Text="{Binding Price, StringFormat=Цена: \{0\} руб.}" Margin="5" Foreground="Black"/>
                                </StackPanel>
                            </Grid>
                        </Border>
                    </DataTemplate>
                </ListView.ItemTemplate>
            </ListView>
        </StackPanel>

        <Border BorderThickness="0,0,1,0" BorderBrush="Black" x:Name="PanelFilter2" CornerRadius="0,30,30,0" Background="White" Opacity="0.9">
            <ScrollViewer HorizontalScrollBarVisibility="Auto" VerticalScrollBarVisibility="Auto">

                <StackPanel Grid.Column="0" Background="White" x:Name="PanelFilter" Orientation="Vertical" DataContext="{Binding}" Opacity="0.9" Margin="0,28,0,37">

                    <!-- Фильтр по цене (ползунок) -->
                    <StackPanel Orientation="Vertical" Margin="0,10,0,0">
                        <TextBlock Text="Цена:" Margin="0,0,5,0"/>
                        <Slider x:Name="priceSlider" Width="200" Minimum="0" Maximum="3000" TickFrequency="100" TickPlacement="BottomRight" ValueChanged="Slider_ValueChanged"/>
                        <StackPanel Orientation="Horizontal">
                            <Label Content="{Binding ElementName=priceSlider, Path=Value, StringFormat={}{0}}" HorizontalAlignment="Right" x:Name="priceLabel"></Label>
                            <Button x:Name="CloseFilt0" HorizontalAlignment="Center" Margin="0,0,0,0" Height="15" Width="15" Style="{StaticResource MenuButton}" Click="CloseFilt0_Click">
                                <StackPanel Orientation="Vertical">
                                    <fa:ImageAwesome Icon="Close" Spin="False" SpinDuration="10" Foreground="Black" Width="5" Height="15"/>
                                </StackPanel>
                            </Button>
                        </StackPanel>
                    </StackPanel>

                    <ListBox Margin="0,15,0,0" x:Name="CategoryList">
                        <Expander Header="Категории" Width="215" x:Name="CloseCategExpander">
                            <ScrollViewer HorizontalScrollBarVisibility="Auto" VerticalScrollBarVisibility="Auto" Height="142">
                                <ListBox ItemsSource="{Binding}" SelectionMode="Single" SelectedItem="{Binding SelectedCategory}" SelectionChanged="ListBox1_SelectionChanged">
                                    <ListBox.ItemTemplate>
                                        <DataTemplate>
                                            <TextBlock Text="{Binding Category_name}"/>
                                        </DataTemplate>
                                    </ListBox.ItemTemplate>
                                </ListBox>
                            </ScrollViewer>
                        </Expander>
                    </ListBox>

                    <StackPanel Orientation="Vertical" Margin="0,0,0,0">
                        <StackPanel Orientation="Horizontal">
                            <Label Content="Выбранная категория:" HorizontalAlignment="Left" VerticalAlignment="Center" Margin="10,0,0,0"/>
                            <Button x:Name="CloseFilt5" HorizontalAlignment="Center" Margin="0,0,0,0" Height="15" Width="15" Style="{StaticResource MenuButton}" Click="CloseFilt5_Click">
                                <StackPanel Orientation="Vertical">
                                    <fa:ImageAwesome Icon="Close" Spin="False" SpinDuration="10" Foreground="Black" Width="5" Height="15"/>
                                </StackPanel>
                            </Button>
                        </StackPanel>
                        <Label Content="{Binding SelectedCategory}" HorizontalAlignment="Left" VerticalAlignment="Center" Margin="10,0,0,0" x:Name="selectlable5"/>
                    </StackPanel>
                    <!-- Фильтр по издателю -->
                    <ListBox Margin="0,10,0,0" x:Name="PublicherList">
                        <Expander Header="Издатель"  Width="215">
                            <ScrollViewer HorizontalScrollBarVisibility="Auto" VerticalScrollBarVisibility="Auto" Height="142">
                                <ListBox ItemsSource="{Binding}" SelectionMode="Single" SelectedItem="{Binding SelectedPublisher, RelativeSource={RelativeSource AncestorType=local:SpisokPage}}" SelectionChanged="ListBoxPublishers_SelectionChanged">
                                    <ListBox.ItemTemplate>
                                        <DataTemplate>
                                            <TextBlock Text="{Binding Manufac_name}"/>
                                        </DataTemplate>
                                    </ListBox.ItemTemplate>
                                </ListBox>
                            </ScrollViewer>
                        </Expander>
                    </ListBox>
                    <!-- Метка для выбранного издателя -->
                    <StackPanel Orientation="Vertical">
                        <StackPanel Orientation="Horizontal">
                            <Label Content="Выбранный издатель:" VerticalAlignment="Center" Margin="10,0,0,0"/>
                            <Button x:Name="CloseFilt1" HorizontalAlignment="Center" Margin="0,0,0,0" Height="15" Width="15" Style="{StaticResource MenuButton}" Click="CloseFilt1_Click">
                                <StackPanel Orientation="Vertical">
                                    <fa:ImageAwesome Icon="Close" Spin="False" SpinDuration="10" Foreground="Black" Width="5" Height="15"/>
                                </StackPanel>
                            </Button>
                        </StackPanel>
                        <Label Content="{Binding SelectedPublisher}" HorizontalAlignment="Left" VerticalAlignment="Center" Margin="10,0,0,0" x:Name="selectlable1"/>
                    </StackPanel>

                    <!-- Фильтр по стране -->
                    <ListBox Margin="0,10,0,0" x:Name="CountryList">
                        <Expander Header="Страна"  x:Name="ClosCont" Width="215">
                            <ScrollViewer HorizontalScrollBarVisibility="Auto" VerticalScrollBarVisibility="Auto" Height="142">

                                <ListBox ItemsSource="{Binding}" SelectionMode="Single" SelectedItem="{Binding SelectedCountry}" SelectionChanged="ListBoxCountryExpa_SelectionChanged">
                                    <ListBox.ItemTemplate>
                                        <DataTemplate>
                                            <TextBlock Text="{Binding Name_country}"/>
                                        </DataTemplate>
                                    </ListBox.ItemTemplate>
                                </ListBox>
                            </ScrollViewer>
                        </Expander>
                    </ListBox>

                    <StackPanel Orientation="Vertical" >
                        <StackPanel Orientation="Horizontal">
                            <Label Content="Выбранная страна:" HorizontalAlignment="Left" VerticalAlignment="Center" Margin="10,0,0,0"/>
                            <Button x:Name="CloseFilt2" HorizontalAlignment="Center" Margin="0,0,0,0" Height="15" Width="15" Style="{StaticResource MenuButton}" Click="CloseFilt2_Click">
                                <StackPanel Orientation="Vertical">
                                    <fa:ImageAwesome Icon="Close" Spin="False" SpinDuration="10" Foreground="Black" Width="5" Height="15"/>
                                </StackPanel>
                            </Button>
                        </StackPanel>
                        <StackPanel Orientation="Horizontal">
                            <Label Content="{Binding SelectedCountry}"   HorizontalAlignment="Left" VerticalAlignment="Center" Margin="10,0,0,0" x:Name="selectlable2"/>
                        </StackPanel>
                    </StackPanel>


                    <ListBox Margin="0,10,0,0" x:Name="DosaList">
                        <Expander Header="Доза применения"  x:Name="CloseDosaExpander" Width="215">
                            <ScrollViewer HorizontalScrollBarVisibility="Auto" VerticalScrollBarVisibility="Auto" Height="142">
                                <ListBox ItemsSource="{Binding}" SelectionMode="Single" SelectedItem="{Binding SelectedDosa}" SelectionChanged="ListBoxDosa_SelectionChanged">
                                    <ListBox.ItemTemplate>
                                        <DataTemplate>
                                            <TextBlock Text="{Binding Dosa_name}"/>
                                        </DataTemplate>
                                    </ListBox.ItemTemplate>
                                </ListBox>
                            </ScrollViewer>
                        </Expander>
                    </ListBox>

                    <StackPanel Orientation="Vertical" Margin="0,0,0,0">
                        <StackPanel Orientation="Horizontal">
                            <Label Content="Выбранная доза:" HorizontalAlignment="Left" VerticalAlignment="Center" Margin="10,0,0,0"/>
                            <Button x:Name="CloseFilt3" HorizontalAlignment="Center" Margin="0,0,0,0" Height="15" Width="15" Style="{StaticResource MenuButton}" Click="CloseFilt3_Click">
                                <StackPanel Orientation="Vertical">
                                    <fa:ImageAwesome Icon="Close" Spin="False" SpinDuration="10" Foreground="Black" Width="5" Height="15"/>
                                </StackPanel>
                            </Button>
                        </StackPanel>
                        <Label Content="{Binding SelectedDosa}" HorizontalAlignment="Left" VerticalAlignment="Center" Margin="10,0,0,0" x:Name="selectlable3"/>
                    </StackPanel>

                    <!-- Фильтр по бренду -->
                    <StackPanel >
                        <ListBox Margin="0,10,0,0" x:Name="BrandList">
                            <Expander Header="Бренд" x:Name="BrandExpander" Width="215">
                                <ScrollViewer HorizontalScrollBarVisibility="Auto" VerticalScrollBarVisibility="Auto" Height="142">
                                    <ListBox ItemsSource="{Binding}" SelectionMode="Single" SelectedItem="{Binding SelectedBrand, RelativeSource={RelativeSource AncestorType=local:SpisokPage}}" SelectionChanged="ListBoxBrands_SelectionChanged">
                                        <ListBox.ItemTemplate>
                                            <DataTemplate>
                                                <TextBlock Text="{Binding Brand_name}"/>
                                            </DataTemplate>
                                        </ListBox.ItemTemplate>
                                    </ListBox>
                                </ScrollViewer>
                            </Expander>
                        </ListBox>

                        <StackPanel Orientation="Vertical" Margin="0,0,0,0">
                            <StackPanel Orientation="Horizontal">
                                <Label Content="Выбранный бренд:" VerticalAlignment="Center" Margin="10,0,0,0"/>
                                <Button x:Name="CloseFilt4" HorizontalAlignment="Center" Margin="0,0,0,0" Height="15" Width="15" Style="{StaticResource MenuButton}" Click="CloseFilt4_Click">
                                    <StackPanel Orientation="Vertical">
                                        <fa:ImageAwesome Icon="Close" Spin="False" SpinDuration="10" Foreground="Black" Width="5" Height="15"/>
                                    </StackPanel>
                                </Button>
                            </StackPanel>
                            <Label Content="{Binding SelectedBrand}" HorizontalAlignment="Left" VerticalAlignment="Center" Margin="10,0,0,0" x:Name="selectlable4"/>
                        </StackPanel>
                    </StackPanel>
                </StackPanel>

            </ScrollViewer>

        </Border>



    </Grid>
</Page>

